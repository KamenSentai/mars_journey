!function(){"use strict";var e,t,o;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(n){var e=this;if(!e.ctx||!e.ctx.listener)return e;for(var t=e._howls.length-1;0<=t;t--)e._howls[t].stereo(n);return e},HowlerGlobal.prototype.pos=function(n,e,t){var o=this;return o.ctx&&o.ctx.listener?(e="number"!=typeof e?o._pos[1]:e,t="number"!=typeof t?o._pos[2]:t,"number"!=typeof n?o._pos:(o._pos=[n,e,t],o.ctx.listener.setPosition(o._pos[0],o._pos[1],o._pos[2]),o)):o},HowlerGlobal.prototype.orientation=function(n,e,t,o,r,a){var i=this;if(!i.ctx||!i.ctx.listener)return i;var p=i._orientation;return e="number"!=typeof e?p[1]:e,t="number"!=typeof t?p[2]:t,o="number"!=typeof o?p[3]:o,r="number"!=typeof r?p[4]:r,a="number"!=typeof a?p[5]:a,"number"!=typeof n?p:(i._orientation=[n,e,t,o,r,a],i.ctx.listener.setOrientation(n,e,t,o,r,a),i)},Howl.prototype.init=(o=Howl.prototype.init,function(n){var e=this;return e._orientation=n.orientation||[1,0,0],e._stereo=n.stereo||null,e._pos=n.pos||null,e._pannerAttr={coneInnerAngle:void 0!==n.coneInnerAngle?n.coneInnerAngle:360,coneOuterAngle:void 0!==n.coneOuterAngle?n.coneOuterAngle:360,coneOuterGain:void 0!==n.coneOuterGain?n.coneOuterGain:0,distanceModel:void 0!==n.distanceModel?n.distanceModel:"inverse",maxDistance:void 0!==n.maxDistance?n.maxDistance:1e4,panningModel:void 0!==n.panningModel?n.panningModel:"HRTF",refDistance:void 0!==n.refDistance?n.refDistance:1,rolloffFactor:void 0!==n.rolloffFactor?n.rolloffFactor:1},e._onstereo=n.onstereo?[{fn:n.onstereo}]:[],e._onpos=n.onpos?[{fn:n.onpos}]:[],e._onorientation=n.onorientation?[{fn:n.onorientation}]:[],o.call(this,n)}),Howl.prototype.stereo=function(n,e){var t=this;if(!t._webAudio)return t;if("loaded"!==t._state)return t._queue.push({event:"stereo",action:function(){t.stereo(n,e)}}),t;var o=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===e){if("number"!=typeof n)return t._stereo;t._stereo=n,t._pos=[n,0,0]}for(var r=t._getSoundIds(e),a=0;a<r.length;a++){var i=t._soundById(r[a]);if(i){if("number"!=typeof n)return i._stereo;i._stereo=n,i._pos=[n,0,0],i._node&&(i._pannerAttr.panningModel="equalpower",i._panner&&i._panner.pan||l(i,o),"spatial"===o?i._panner.setPosition(n,0,0):i._panner.pan.setValueAtTime(n,Howler.ctx.currentTime)),t._emit("stereo",i._id)}}return t},Howl.prototype.pos=function(n,e,t,o){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"pos",action:function(){r.pos(n,e,t,o)}}),r;if(e="number"!=typeof e?0:e,t="number"!=typeof t?-.5:t,void 0===o){if("number"!=typeof n)return r._pos;r._pos=[n,e,t]}for(var a=r._getSoundIds(o),i=0;i<a.length;i++){var p=r._soundById(a[i]);if(p){if("number"!=typeof n)return p._pos;p._pos=[n,e,t],p._node&&(p._panner&&!p._panner.pan||l(p,"spatial"),p._panner.setPosition(n,e,t)),r._emit("pos",p._id)}}return r},Howl.prototype.orientation=function(n,e,t,o){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"orientation",action:function(){r.orientation(n,e,t,o)}}),r;if(e="number"!=typeof e?r._orientation[1]:e,t="number"!=typeof t?r._orientation[2]:t,void 0===o){if("number"!=typeof n)return r._orientation;r._orientation=[n,e,t]}for(var a=r._getSoundIds(o),i=0;i<a.length;i++){var p=r._soundById(a[i]);if(p){if("number"!=typeof n)return p._orientation;p._orientation=[n,e,t],p._node&&(p._panner||(p._pos||(p._pos=r._pos||[0,0,-.5]),l(p,"spatial")),p._panner.setOrientation(n,e,t)),r._emit("orientation",p._id)}}return r},Howl.prototype.pannerAttr=function(){var n,e,t,o=this,r=arguments;if(!o._webAudio)return o;if(0===r.length)return o._pannerAttr;if(1===r.length){if("object"!=typeof r[0])return(t=o._soundById(parseInt(r[0],10)))?t._pannerAttr:o._pannerAttr;n=r[0],void 0===e&&(n.pannerAttr||(n.pannerAttr={coneInnerAngle:n.coneInnerAngle,coneOuterAngle:n.coneOuterAngle,coneOuterGain:n.coneOuterGain,distanceModel:n.distanceModel,maxDistance:n.maxDistance,refDistance:n.refDistance,rolloffFactor:n.rolloffFactor,panningModel:n.panningModel}),o._pannerAttr={coneInnerAngle:void 0!==n.pannerAttr.coneInnerAngle?n.pannerAttr.coneInnerAngle:o._coneInnerAngle,coneOuterAngle:void 0!==n.pannerAttr.coneOuterAngle?n.pannerAttr.coneOuterAngle:o._coneOuterAngle,coneOuterGain:void 0!==n.pannerAttr.coneOuterGain?n.pannerAttr.coneOuterGain:o._coneOuterGain,distanceModel:void 0!==n.pannerAttr.distanceModel?n.pannerAttr.distanceModel:o._distanceModel,maxDistance:void 0!==n.pannerAttr.maxDistance?n.pannerAttr.maxDistance:o._maxDistance,refDistance:void 0!==n.pannerAttr.refDistance?n.pannerAttr.refDistance:o._refDistance,rolloffFactor:void 0!==n.pannerAttr.rolloffFactor?n.pannerAttr.rolloffFactor:o._rolloffFactor,panningModel:void 0!==n.pannerAttr.panningModel?n.pannerAttr.panningModel:o._panningModel})}else 2===r.length&&(n=r[0],e=parseInt(r[1],10));for(var a=o._getSoundIds(e),i=0;i<a.length;i++)if(t=o._soundById(a[i])){var p=t._pannerAttr;p={coneInnerAngle:void 0!==n.coneInnerAngle?n.coneInnerAngle:p.coneInnerAngle,coneOuterAngle:void 0!==n.coneOuterAngle?n.coneOuterAngle:p.coneOuterAngle,coneOuterGain:void 0!==n.coneOuterGain?n.coneOuterGain:p.coneOuterGain,distanceModel:void 0!==n.distanceModel?n.distanceModel:p.distanceModel,maxDistance:void 0!==n.maxDistance?n.maxDistance:p.maxDistance,refDistance:void 0!==n.refDistance?n.refDistance:p.refDistance,rolloffFactor:void 0!==n.rolloffFactor?n.rolloffFactor:p.rolloffFactor,panningModel:void 0!==n.panningModel?n.panningModel:p.panningModel};var s=t._panner;s?(s.coneInnerAngle=p.coneInnerAngle,s.coneOuterAngle=p.coneOuterAngle,s.coneOuterGain=p.coneOuterGain,s.distanceModel=p.distanceModel,s.maxDistance=p.maxDistance,s.refDistance=p.refDistance,s.rolloffFactor=p.rolloffFactor,s.panningModel=p.panningModel):(t._pos||(t._pos=o._pos||[0,0,-.5]),l(t,"spatial"))}return o},Sound.prototype.init=(t=Sound.prototype.init,function(){var n=this,e=n._parent;n._orientation=e._orientation,n._stereo=e._stereo,n._pos=e._pos,n._pannerAttr=e._pannerAttr,t.call(this),n._stereo?e.stereo(n._stereo):n._pos&&e.pos(n._pos[0],n._pos[1],n._pos[2],n._id)}),Sound.prototype.reset=(e=Sound.prototype.reset,function(){var n=this._parent;return this._orientation=n._orientation,this._pos=n._pos,this._pannerAttr=n._pannerAttr,e.call(this)});var l=function(n,e){"spatial"===(e=e||"spatial")?(n._panner=Howler.ctx.createPanner(),n._panner.coneInnerAngle=n._pannerAttr.coneInnerAngle,n._panner.coneOuterAngle=n._pannerAttr.coneOuterAngle,n._panner.coneOuterGain=n._pannerAttr.coneOuterGain,n._panner.distanceModel=n._pannerAttr.distanceModel,n._panner.maxDistance=n._pannerAttr.maxDistance,n._panner.refDistance=n._pannerAttr.refDistance,n._panner.rolloffFactor=n._pannerAttr.rolloffFactor,n._panner.panningModel=n._pannerAttr.panningModel,n._panner.setPosition(n._pos[0],n._pos[1],n._pos[2]),n._panner.setOrientation(n._orientation[0],n._orientation[1],n._orientation[2])):(n._panner=Howler.ctx.createStereoPanner(),n._panner.pan.setValueAtTime(n._stereo,Howler.ctx.currentTime)),n._panner.connect(n._node),n._paused||n._parent.pause(n._id,!0).play(n._id)}}();